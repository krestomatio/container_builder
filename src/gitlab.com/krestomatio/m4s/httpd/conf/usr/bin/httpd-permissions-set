#!/bin/bash -e
# description: set files/dirs permissions for httpd
# https://docs.openshift.com/container-platform/4.2/openshift_images/create-images.html#use-uid_create-images

rpm-file-permissions

# In order to drop the root user, we have to make some directories world
# writeable as OpenShift default security model is to run the container under
# random UID.

chmod -R a+rwx ${HTTPD_main_conf_path}
chmod -R a+rwx ${HTTPD_main_conf_d_path}
chmod -R a+rwx ${HTTPD_var_run_path}
chmod -R a+rwx ${HTTPD_log_path}
chown -R ${CTR_user_id}:${CTR_group_id} ${HTTPD_public_path}
