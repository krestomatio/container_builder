#!/bin/bash -e
# description: entrypoint script for container

for f in ${ENTRYPOINT_SCRIPTS_PATH}/*; do
    if [ -f "$f" ]; then
        if [ -x "$f" ]; then
            echo "$0: running $f"
            "$f"
        else
            echo "$0: sourcing $f"
            . "$f"
        fi
    fi
done

# first arg is `-f` or `--some-option
if [ "${1#-}" != "$1" ]; then
    if ! [ -z ${CMD+x} ]; then
	       set -- ${CMD} "$@"
    fi
fi

exec "$@"
