#!/bin/bash -e
# description: entrypoint script for container

# source or exec other script
for f in ${CTR_entrypoint_opt_path}/*; do
    if [ -f "$f" ]; then
        if [ -x "$f" ]; then
            echo "$0: running $f"
            "$f"
        else
            echo "$0: sourcing $f"
            . "$f"
        fi
    fi
done

# first arg is `-f` or `--some-option
if [ "${1#-}" != "$1" ]; then
    if ! [ -z ${CTR_cmd+x} ]; then
	       set -- ${CTR_cmd} "$@"
    fi
fi

exec "$@"
